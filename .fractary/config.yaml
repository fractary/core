version: '2.0'
repo:
  active_handler: github
  handlers:
    github:
      owner: fractary
      repo: core
      token: ${GITHUB_TOKEN}
      api_url: https://api.github.com
  worktree:
    location: .claude/worktrees
    naming:
      with_work_id: 'work-id-{id}'
      default: random-words
  defaults:
    environments:
      production:
        branch: main
        protected: true
      test:
        branch: test
        protected: false
    default_environment: production
    pr:
      merge:
        strategy: squash
        delete_branch: true
work:
  active_handler: github
  handlers:
    github:
      owner: fractary
      repo: core
      token: ${GITHUB_TOKEN}
      api_url: https://api.github.com
file:
  schema_version: '2.0'
  active_handler: local
  handlers:
    logs-write:
      type: local
      local:
        base_path: logs
    logs-archive:
      type: local
      local:
        base_path: logs/_archive
    docs-write:
      type: local
      local:
        base_path: docs
    docs-archive:
      type: local
      local:
        base_path: docs/_archive
docs:
  schema_version: '1.1'
  custom_templates_path: docs/templates/manifest.yaml
  storage:
    file_handlers:
      - name: default
        write: docs-write
        archive: docs-archive
logs:
  schema_version: '2.0'
  storage:
    file_handlers:
      - name: default
        write: logs-write
        archive: logs-archive
faber:
  workflows:
    path: .fractary/faber/workflows
    default: default
    autonomy: guarded
  runs:
    path: .fractary/faber/runs
codex:
  schema_version: '2.0'
  organization: fractary
  project: core
  codex_repo: codex.fractary.com
  remotes:
    fractary/codex.fractary.com:
      token: ${GITHUB_TOKEN}
  sync:
    to_codex:
      include:
        - .fractary/codex/memory/**
        - docs/**
        - README.md
        - CLAUDE.md
      exclude:
        - '*.tmp'
    from_codex:
      include:
        - codex://fractary/codex.fractary.com/docs/**
        - codex://fractary/codex.fractary.com/.fractary/codex/memory/**
        - codex://fractary/codex/docs/**
        - codex://fractary/faber/docs/**
